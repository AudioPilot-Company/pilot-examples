<!-- 
recordId: 
    The Studio Session record you are trying to access.

apiKey:
    The API key from your company settings in Pilot Ops.
    For production, use an API key with "embed" permissions to generate a Record Access Token for improved security.
    You may use either an embed-enabled API key or a record access token here.
-->
    
<iframe id="audiopilot-iframe" src="https://studio.myaudiopilot.com" width="60%" height="400" style="border:1px solid #ccc;"
    title="AudioPilot Studio">
</iframe>

<script>
    const iframe = document.getElementById('audiopilot-iframe');

    // Listen for studio-ready event from iframe
    window.addEventListener('message', (event) => {
        const trustedOrigin = 'https://studio.myaudiopilot.com';
        if (event.origin !== trustedOrigin) return; // Security check: ignore other origins

        if (event.data?.type === 'studio-ready') {
            // Send credentials securely via postMessage
            iframe.contentWindow.postMessage({
                type: 'auth',
                recordId: 'YOUR_RECORD_ID',
                apiKey: 'YOUR_API_KEY' // Use embed key to generate record access tokens in production
            }, trustedOrigin);
        }
    });
</script>