<!-- 
recordId: 
    The Studio Session record you are trying to access.

apiKey:
    The API key from your company settings in Pilot Ops.
    For production, use an API key with "embed" permissions to generate a Record Access Token for improved security.
    You may use either an embed-enabled API key or a record access token here.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AudioPilot Embed Example</title>

    <!-- Crucial for responsive scaling on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        #audiopilot-iframe {
            width: 100%;
            height: 100%;
            border: 1px solid #ccc;
            display: block;
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <!-- The parent container height can be controlled by the client -->
    <iframe id="audiopilot-iframe" src="https://studio.myaudiopilot.com" title="AudioPilot Studio"></iframe>

    <script>
        const iframe = document.getElementById('audiopilot-iframe');

        // Listen for the "studio-ready" event from the iframe
        window.addEventListener('message', (event) => {
            const trustedOrigin = 'https://studio.myaudiopilot.com';
            if (event.origin !== trustedOrigin) return; // Security: ignore other origins

            if (event.data?.type === 'studio-ready') {
                // Send credentials securely via postMessage
                iframe.contentWindow.postMessage({
                    type: 'auth',
                    recordId: 'YOUR_RECORD_ID',  // Replace with your recordId
                    apiKey: 'YOUR_API_KEY'       // Replace with your embed key or usertoken
                }, trustedOrigin);
            }
        });
    </script>
</body>

</html>